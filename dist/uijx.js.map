{"version":3,"sources":["src/helpers.js","node_modules/es6-proxy-polyfill/dist/es6-proxy-polyfill.js","node_modules/custom-event-polyfill/polyfill.js","src/core.js","src/triggers/event.js","node_modules/whatwg-fetch/fetch.js","node_modules/promise-polyfill/src/finally.js","node_modules/promise-polyfill/src/index.js","node_modules/promise-polyfill/src/polyfill.js","src/triggers/link.js","src/mutations.js","uijx.js"],"names":["evaluateAndReturn","expression","ctx","f","Function","evaluate","crawl","e","callback","n","firstElementChild","nextElementSibling","getDataAttribute","el","name","undefined","dataset","toCamelCase","getAttribute","setDataAttribute","value","setAttribute","str","replace","$1","toUpperCase","toLowerCase","toKebabCase","TriggerAttribRE","Engine","root","mutations","triggers","tags","mount","t","m","apply","$","$dom","Proxy","get","subject","prop","createMutableElement","document","getElementById","$el","$data","q","query","querySelector","key","hasOwnProperty","set","s","task","slot","data","getEmptyContext","id","_uijx_initiated","i","attributes","length","a","test","info","TriggerInfo","trigger","target","attachTo","RegExp","nodeName","ev","event","addEventListener","dispatchEvent","CustomEvent","detail","waiting","handle","attribute","matches","exec","Error","modifiers","after","before","error","rawModifiers","split","modifier","indexOf","type","run","d","hasModifier","preventDefault","support","searchParams","self","iterable","Symbol","blob","Blob","formData","arrayBuffer","isDataView","obj","DataView","prototype","isPrototypeOf","viewClasses","isArrayBufferView","ArrayBuffer","isView","Object","toString","call","normalizeName","String","TypeError","normalizeValue","iteratorFor","items","iterator","next","shift","done","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","readBlobAsArrayBuffer","FileReader","promise","readAsArrayBuffer","readBlobAsText","readAsText","readArrayBufferAsText","buf","view","Uint8Array","chars","fromCharCode","join","bufferClone","slice","byteLength","buffer","Body","_initBody","_bodyInit","_bodyText","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","rejected","then","text","decode","json","JSON","parse","oldValue","has","thisArg","keys","push","values","entries","methods","normalizeMethod","method","upcased","Request","input","options","url","credentials","mode","signal","referrer","form","trim","bytes","decodeURIComponent","parseHeaders","rawHeaders","line","parts","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","DOMException","err","message","stack","create","constructor","fetch","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","onreadystatechange","readyState","removeEventListener","send","polyfill","finallyConstructor","reason","setTimeoutFunc","setTimeout","x","Boolean","noop","bind","fn","arguments","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","newValue","finale","_unhandledRejectionFn","len","Handler","ex","prom","promiseFinally","all","arr","args","remaining","res","val","race","setImmediate","console","warn","globalNS","window","global","href","r","p","content","catch","SHOW","style","display","mutation","ADDCLASS","classList","add","RMCLASS","remove","VISIBLE","visibility","STYLE","CLASSES","ATTRIB","VALUE","TEXT","innerText","HTML","innerHTML","BEFORE","insertAdjacentHTML","AFTER","APPEND","PREPEND","Uijx","registerTrigger","link","registerMutation"],"mappings":"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","file":"uijx.js","sourceRoot":"..","sourcesContent":["\r\nexport function evaluateAndReturn(expression, ctx) {\r\n    let f = new Function('c', 'with (c) { return ' + expression + ' }');\r\n    return f(ctx);\r\n}\r\n\r\nexport function evaluate(expression, ctx) {\r\n    (new Function('c', 'with (c) { ' + expression + ' }'))(ctx);\r\n}\r\n\r\nexport function crawl(e, callback) {\r\n    if(callback(e) === false) return;\r\n    let n = e.firstElementChild;\r\n    while (n) {\r\n        crawl(n, callback);\r\n        n = n.nextElementSibling;\r\n    }\r\n}\r\n\r\nexport function getDataAttribute(el, name) {\r\n    if(el.dataset !== undefined) {\r\n        return el.dataset[toCamelCase(name)];\r\n    }else {\r\n        return el.getAttribute(\"data-\"+name);\r\n    }\r\n}\r\n\r\nexport function setDataAttribute(el, name, value) {\r\n    if(el.dataset !== undefined) {\r\n        el.dataset[toCamelCase(name)] = value; \r\n    }else{\r\n        el.setAttribute(\"data-\"+name, value);\r\n    }\r\n}\r\n\r\nexport function toCamelCase (str) {\r\n    return str\r\n        .replace(/\\-(.)/g, function($1) { return $1.toUpperCase(); })\r\n        .replace(/\\-/g, '')\r\n        .replace(/^(.)/, function($1) { return $1.toLowerCase(); })\r\n    ;\r\n}\r\n\r\nexport function toKebabCase(str) {\r\n    return str\r\n        .replace(/([a-z])([A-Z])/g, '$1-$2')\r\n        .replace(/[_\\s]/, '-')\r\n        .toLowerCase()\r\n    ;\r\n}\r\n","/**\n * ES6 Proxy Polyfill\n * @version 2.0.1\n * @author Ambit Tsai <ambit_tsai@qq.com>\n * @license Apache-2.0\n * @see {@link https://github.com/ambit-tsai/es6-proxy-polyfill}\n */\n!function(t,n){\"function\"==typeof define&&define.amd?define(n(t)):\"object\"==typeof module&&module.exports?module.exports=n(t):t.Proxy||(t.Proxy=n(t))}(\"object\"==typeof globalThis&&globalThis||\"object\"==typeof window&&window||\"object\"==typeof global&&global||\"object\"==typeof self&&self||this,function(t){var a,s=\"[[ProxyTarget]]\",u=\"[[ProxyHandler]]\",f=\"[[Get]]\",p=\"[[Set]]\",y=\"[[Call]]\",l=\"[[Construct]]\",e=t.Object,h=e.defineProperty,v=e.defineProperties,g=e.getPrototypeOf,b=e.getOwnPropertyDescriptor,d=!!v&&/\\[native code\\]/.test(v.toString());function r(t,n){if(this instanceof r)return o(t,n).proxy;P(\"Constructor Proxy requires 'new'\")}function o(t,n){x(t)&&x(n)||P(\"Cannot create proxy with a non-object as target or handler\");var e=new w(t,n);return{proxy:(\"function\"==typeof t?function c(t){var n=t[s];function e(){return this instanceof e?t[l](arguments,e):t[y](this,arguments)}if(e.prototype=n.prototype,d){var r=O(t),o=m(g(n),r);for(var i in T(e,o),r=_(n,t))j(e,i)&&delete r[i];v(e,r)}else C(e,n);return e}:t instanceof Array?function o(e){var t,n,r=e[s];d&&((t=O(e)).concat.get=function(){var t=e[f](\"concat\",this);return t===Array.prototype.concat?t.bind(r):t},n=m(g(r),t));return(t=_(r,e)).length.set=function(t){var n=t-r.length;e[p](\"length\",t,this),n&&function f(t,n,e){var r=e[s];if(0<t)for(var o=r.length,i=o-t;i<o;++i){var c=b(n,i);c?h(r,i,c):r[i]=a,c=k(r,i,e),h(n,i,c)}else for(var u=(i=r.length)-t;i<u;++i)delete n[i]}(n,this,e)},m(n,t)}:function i(t){var n,e,r=t[s];d&&(n=O(t),e=m(g(r),n));return n=_(r,t),m(e,n)})(e),revoke:function(){e[s]=a,e[u]=a}}}function w(t,n){this[s]=t,this[u]=n}function c(t,n){t||P(\"Cannot perform '\"+n+\"' on a proxy that has been revoked\")}function P(t){throw new TypeError(t)}function x(t){return t&&(\"object\"==typeof t||\"function\"==typeof t)}function j(t,n){return e.prototype.hasOwnProperty.call(t,n)}r.revocable=function(t,n){return this instanceof r.revocable&&P(\"Proxy.revocable is not a constructor\"),o(t,n)},w.prototype[f]=function(t,n){var e=this[u];return c(e,\"get\"),e.get==a?this[s][t]:\"function\"==typeof e.get?e.get(this[s],t,n):void P(\"Trap 'get' is not a function: \"+e.get)},w.prototype[p]=function(t,n,e){var r=this[u];if(c(r,\"set\"),r.set==a)this[s][t]=n;else if(\"function\"==typeof r.set){r.set(this[s],t,n,e)||P(\"Trap 'set' returned false for property '\"+t+\"'\")}else P(\"Trap 'set' is not a function: \"+r.set)},w.prototype[y]=function(t,n){var e=this[u];return c(e,\"apply\"),e.apply==a?this[s].apply(t,n):\"function\"==typeof e.apply?e.apply(this[s],t,n):void P(\"Trap 'apply' is not a function: \"+e.apply)},w.prototype[l]=function(t,n){var e,r=this[u];if(c(r,\"construct\"),r.construct==a?e=function i(t,n){for(var e=[],r=0,o=n.length;r<o;++r)e.push(\"args[\"+r+\"]\");return new Function(\"Ctor\",\"args\",\"return new Ctor(\"+e.join(\", \")+\")\")(t,n)}(this[s],t):\"function\"==typeof r.construct?e=r.construct(this[s],t,n):P(\"Trap 'construct' is not a function: \"+r.construct),x(e))return e;P(\"Trap 'construct' returned non-object: \"+e)};var i=e.getOwnPropertyNames||function(t){var n=[];for(var e in t)j(t,e)&&n.push(e);return n},T=e.setPrototypeOf||function(t,n){return t.__proto__=n,t},m=d?e.create:function(t,n){return v({},n)},C=e.assign||function(t,n){for(var e in n)j(n,e)&&(t[e]=n[e]);return t};function O(t){for(var n={},e=t[s];e=g(e);){var r=_(e,t);C(n,r)}return n}function _(t,n){for(var e=i(t),r={},o=e.length-1;0<=o;--o)r[e[o]]=k(t,e[o],n);return r}function k(t,n,e){var r=b(t,n);return{get:function(){return e[f](n,this)},set:function(t){e[p](n,t,this)},enumerable:r.enumerable,configurable:r.configurable}}return r});","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","import {getDataAttribute, toCamelCase, toKebabCase, evaluate, evaluateAndReturn, crawl } from './helpers';\r\nimport Proxy from 'es6-proxy-polyfill/dist/es6-proxy-polyfill';\r\nimport \"custom-event-polyfill\"\r\n\r\nconst TriggerAttribRE = /^data-on:([a-zA-Z0-9\\-]+)(\\.[a-zA-Z\\.\\-]*)?$/;\r\n\r\nexport class Engine {\r\n\r\n    constructor(root) {\r\n        this.root = root;\r\n        \r\n        this.mutations = {};\r\n        this.triggers = {};\r\n        this.tags = {};\r\n    }\r\n\r\n    start() {\r\n        this.mount(this.root);\r\n    }\r\n\r\n    registerTrigger(t) {\r\n        this.triggers[t.name] = t;\r\n    }\r\n\r\n    registerMutation(m) {\r\n        this.mutations[toCamelCase(m.name)] = m.apply;\r\n    }\r\n\r\n    getEmptyContext() {\r\n        let $ = this;\r\n        return {\r\n            $dom: new Proxy($.tags, {\r\n                get(subject, prop) {\r\n                    if(prop in subject) {\r\n                        return $.createMutableElement(document.getElementById(prop));\r\n                    }\r\n                }\r\n            }),\r\n            $el: null,\r\n            $data: null,\r\n            q (query) {\r\n                let el = $.root.querySelector(query);\r\n                return el ? $.createMutableElement(el) : undefined;\r\n            }\r\n        };\r\n    }\r\n\r\n    createMutableElement(el) {\r\n        let mutations = this.mutations;\r\n        let $ = this;\r\n        let subject = { $el: el };\r\n        for (const key in this.mutations) {\r\n            if (this.mutations.hasOwnProperty(key)) {\r\n                subject[key] = '';\r\n            }\r\n        }\r\n\r\n        return new Proxy(subject, {\r\n            set (s, prop, value) {\r\n                if(typeof mutations[prop] !== 'undefined') {\r\n                    mutations[prop](value, s.$el, $);\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            get (s, prop) {\r\n                if(prop === '$el') {\r\n                    return s[prop];\r\n                }\r\n                if(prop === 'value') {\r\n                    return s.$el.value;\r\n                }\r\n                return undefined;\r\n            }\r\n        });\r\n    }\r\n\r\n    run(task, slot, data = null, callback = undefined) {\r\n        let ctx = this.getEmptyContext();\r\n        ctx.$data = data;\r\n        ctx.$el = slot;\r\n\r\n        if(callback) {\r\n            let value = evaluateAndReturn(task, ctx);\r\n            callback(value);\r\n        }\r\n        else {\r\n            evaluate(task, ctx);\r\n        }\r\n    }\r\n\r\n    mount(el) {\r\n        let $ = this;\r\n        crawl(el, (e) => {\r\n            if(e.id && !e._uijx_initiated) {\r\n                $.tags[toCamelCase(e.id)] = '';\r\n                for(let i=0; i < e.attributes.length; i++) {\r\n                    let a = e.attributes[i];\r\n                    if(TriggerAttribRE.test(a.name)) { \r\n                        let info = new TriggerInfo(e, a.name);\r\n                        let trigger = $.triggers[info.trigger] || $.triggers['event'];\r\n                        if(trigger) {\r\n                            let target = null;\r\n                            if(trigger.attachTo === 'root')\r\n                                target = $.root;\r\n                            else if(trigger.attachTo === 'self')\r\n                                target = e;\r\n                            else\r\n                                target = (new RegExp('^' + trigger.attachTo + '$')).test(e.nodeName.toUpperCase()) ? e :null;\r\n\r\n                            if(target) {\r\n                                let ev = toKebabCase(trigger.event || info.trigger);\r\n                            \r\n                                target.addEventListener(ev, (event) => {\r\n                                    e.dispatchEvent(new CustomEvent('waiting', {\r\n                                        detail: { waiting: true, slot: e }\r\n                                    }));\r\n                                    \r\n                                    trigger.handle($.createMutableElement(e), event, info, $, () => {\r\n                                        e.dispatchEvent(new CustomEvent('waiting', {\r\n                                            detail: { waiting: false, slot: e }\r\n                                        }));\r\n                                    })\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                e._uijx_initiated = true;\r\n            }\r\n        })\r\n        ;\r\n    }\r\n}\r\n\r\nexport class TriggerInfo {\r\n\r\n    constructor(el, attribute) {\r\n        let matches = TriggerAttribRE.exec(attribute);\r\n        if(matches) {\r\n            this.trigger = matches[1];\r\n            this.modifiers = matches[2] || '';\r\n            this.after = getDataAttribute(el, this.trigger + '-after');\r\n            this.before = getDataAttribute(el, this.trigger + '-before');\r\n            this.error = getDataAttribute(el,this.trigger + '-error');\r\n            this.task = el.getAttribute(attribute);\r\n        }\r\n        else\r\n            throw new Error('\"' + attribute + '\" is not a valid trigger attribute');\r\n    }\r\n\r\n    getModifierList() {\r\n        return this.rawModifiers.split('.');\r\n    }\r\n\r\n    hasModifier(modifier) {\r\n        return this.modifiers.indexOf('.' + modifier) >= 0;\r\n    }\r\n}\r\n","export default {\r\n    name: 'event',\r\n    attachTo: 'self',\r\n    event: null,\r\n    handle (slot, event, info, $, callback) {\r\n        let data = undefined;\r\n        \r\n        if(['blur', 'change', 'focus', 'keydown', 'keyup'].indexOf(event.type) >= 0) {\r\n            data = slot.$el.value;\r\n        }\r\n\r\n        $.run(info.before, slot, data, (d) => {\r\n            d = d || data;\r\n            if(info.hasModifier('prevent')) {\r\n                event.preventDefault();\r\n            }\r\n\r\n            $.run(info.task,slot, d, (d) => $.run(info.after, slot, d, callback));\r\n        });\r\n    }\r\n}","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!('Promise' in globalNS)) {\n  globalNS['Promise'] = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","import 'whatwg-fetch';\r\nimport 'promise-polyfill/src/polyfill';\r\n\r\nexport default {\r\n    name: 'link',\r\n    attachTo: 'A',\r\n    event: 'click',\r\n    handle (slot, event, info, $, callback) {\r\n        event.preventDefault();\r\n        let data = undefined;\r\n\r\n        $.run(info.before, slot, data, (d) => {\r\n            let href = slot.$el.getAttribute('href');\r\n            fetch(href)\r\n                .then(r => {\r\n                    let p;\r\n                    if(info.hasModifier('json'))\r\n                        p = r.json();\r\n                    else if(info.hasModifier('blob'))\r\n                        p = r.blob();\r\n                    else if(info.hasModifier('buffer'))\r\n                        p = r.arrayBuffer();\r\n                    else\r\n                        p = r.text();\r\n                    \r\n                    return p.then(content => ({status: r.status, content}));\r\n                })\r\n                .then(({status, content})=> {\r\n                    if(status >= 400) {\r\n                        if(info.error) {\r\n                            $.run(info.error,slot, content, (d) => $.run(info.after, slot, d, callback));\r\n                        }\r\n                        else {\r\n                            throw new Error('error after fetching ressource. use the error hook to query the request result');\r\n                        }\r\n                    }\r\n                    else {\r\n                        $.run(info.task,slot, content, (d) => $.run(info.after, slot, d, callback));\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.error(e);\r\n                })\r\n            ;\r\n        });\r\n    }\r\n}\r\n","import { toKebabCase } from \"./helpers\";\r\n\r\nexport const SHOW = {\r\n    name: 'show',\r\n    apply (data, el, $) {\r\n        el.style.display =  data ? 'block' : 'none';\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'show', target: el } }));\r\n    }\r\n}\r\n\r\nexport const ADDCLASS = {\r\n    name: 'add-class',\r\n    apply (data, el, $) {\r\n        if(typeof data === 'string') {\r\n            data = data.split(' ');\r\n        }\r\n        for(const i in data) {\r\n            el.classList.add(data[i]);\r\n        }\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'add-class', target: el } }));\r\n    }\r\n}\r\n\r\nexport const RMCLASS = {\r\n    name: 'rm-class',\r\n    apply (data, el, $) {\r\n        if(typeof data === 'string') {\r\n            data = data.split(' ');\r\n        }\r\n        for(const i in data) {\r\n            el.classList.remove(data[i]);\r\n        }\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'rm-class', target: el } }));\r\n    }\r\n}\r\n\r\nexport const VISIBLE = {\r\n    name: 'visible',\r\n    apply (data, el, $) {\r\n        el.style.visibility =  data ? 'visible' : 'hidden';\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'visible', target: el } }));\r\n    }\r\n}\r\n\r\nexport const STYLE = {\r\n    name: 'style',\r\n    apply (data, el, $) {\r\n        for(const prop in data) {\r\n            el.style[toKebabCase(prop)] = data[prop];\r\n        }\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'style', target: el } }));\r\n    }\r\n}\r\n\r\nexport const CLASSES = {\r\n    name: 'classes',\r\n    apply (data, el, $) {\r\n        for(const prop in data) {\r\n            if(data[prop]) {\r\n                el.classList.add(prop);\r\n            }\r\n            else {\r\n                el.classList.remove(prop);\r\n            }\r\n        }\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'classes', target: el } }));\r\n    }\r\n}\r\n\r\nexport const ATTRIB = {\r\n    name: 'attrib',\r\n    apply (data, el, $) {\r\n        for(const prop in data) {\r\n            el.setAttribute(toKebabCase(prop), data[prop]);\r\n        }\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'attrib', target: el } }));\r\n    }\r\n}\r\n\r\nexport const VALUE = {\r\n    name: 'value',\r\n    apply (data, el, $) {\r\n        el.value = data;\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'value', target: el } }));\r\n    }\r\n}\r\n\r\nexport const TEXT = {\r\n    name: 'text',\r\n    apply (data, el, $) {\r\n        el.innerText = data;\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'text', target: el } }));\r\n    }\r\n}\r\n\r\nexport const HTML = {\r\n    name: 'html',\r\n    apply (data, el, $) {\r\n        el.innerHTML = data;\r\n        \r\n        $.mount(el);\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'html', target: el } }));\r\n    }\r\n}\r\n\r\nexport const BEFORE = {\r\n    name: 'before',\r\n    apply (data, el, $) {\r\n        el.insertAdjacentHTML('beforebegin', data);;\r\n        \r\n        $.mount(el);\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'before', target: el } }));\r\n    }\r\n}\r\n\r\nexport const AFTER = {\r\n    name: 'after',\r\n    apply (data, el, $) {\r\n        el.insertAdjacentHTML('afterend', data);;\r\n        \r\n        $.mount(el);\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'after', target: el } }));\r\n    }\r\n}\r\n\r\nexport const APPEND = {\r\n    name: 'append',\r\n    apply (data, el, $) {\r\n        el.insertAdjacentHTML('beforeend', data);;\r\n        \r\n        $.mount(el);\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'after', target: el } }));\r\n    }\r\n}\r\n\r\nexport const PREPEND = {\r\n    name: 'prepend',\r\n    apply (data, el, $) {\r\n        el.insertAdjacentHTML('afterbegin', data);;\r\n        \r\n        $.mount(el);\r\n\r\n        el.dispatchEvent(new CustomEvent('dom-mutated', { detail: { mutation: 'prepend', target: el } }));\r\n    }\r\n}\r\n","import {Engine} from './src/core';\r\nimport event from './src/triggers/event';\r\nimport link from './src/triggers/link';\r\nimport { SHOW , ADDCLASS, RMCLASS, VISIBLE, STYLE, CLASSES, ATTRIB, VALUE, TEXT, HTML, AFTER, BEFORE, PREPEND, APPEND } from './src/mutations';\r\n\r\nfunction Uijx(id) {\r\n    let root = document.getElementById(id);\r\n    \r\n    if(root){\r\n        let e = new Engine(root);\r\n        // register built-in triggers\r\n        e.registerTrigger(event);\r\n        e.registerTrigger(link);\r\n\r\n        //register built-in mutations\r\n        e.registerMutation(SHOW);\r\n        e.registerMutation(ADDCLASS);\r\n        e.registerMutation(RMCLASS);\r\n        e.registerMutation(STYLE);\r\n        e.registerMutation(VISIBLE);\r\n        e.registerMutation(CLASSES);\r\n        e.registerMutation(ATTRIB);\r\n        e.registerMutation(VALUE);\r\n        e.registerMutation(TEXT);\r\n        e.registerMutation(HTML);\r\n        e.registerMutation(AFTER);\r\n        e.registerMutation(BEFORE);\r\n        e.registerMutation(APPEND);\r\n        e.registerMutation(PREPEND);\r\n\r\n        return e;\r\n    }\r\n    else\r\n        throw new Error('cannot find element with id: ' + id);\r\n}\r\n\r\nwindow[\"Uijx\"] = Uijx;"]}