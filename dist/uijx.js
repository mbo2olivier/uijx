parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QNKW":[function(require,module,exports) {
"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e;exports.default=t;
},{}],"Z6u4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./finally"));function t(e){return e&&e.__esModule?e:{default:e}}var n=setTimeout;function o(e){return Boolean(e&&void 0!==e.length)}function r(){}function i(e,t){return function(){e.apply(t,arguments)}}function u(e){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function f(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,u._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var o;try{o=n(e._value)}catch(r){return void a(t.promise,r)}c(t.promise,o)}else(1===e._state?c:a)(t.promise,e._value)})):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof u)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d(i(n,t),e)}e._state=1,e._value=t,l(e)}catch(o){a(e,o)}}function a(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&u._immediateFn(function(){e._handled||u._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)f(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,a(t,e))})}catch(o){if(n)return;n=!0,a(t,o)}}u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var n=new this.constructor(r);return f(this,new s(e,t,n)),n},u.prototype.finally=e.default,u.all=function(e){return new u(function(t,n){if(!o(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function u(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var f=o.then;if("function"==typeof f)return void f.call(o,function(t){u(e,t)},n)}r[e]=o,0==--i&&t(r)}catch(c){n(c)}}for(var f=0;f<r.length;f++)u(f,r[f])})},u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u(function(t){t(e)})},u.reject=function(e){return new u(function(t,n){n(e)})},u.race=function(e){return new u(function(t,n){if(!o(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)u.resolve(e[r]).then(t,n)})},u._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){n(e,0)},u._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=u;exports.default=h;
},{"./finally":"QNKW"}],"qBxc":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],r=o(require("./index")),n=o(require("./finally"));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in i?i.Promise.prototype.finally||(i.Promise.prototype.finally=n.default):i.Promise=r.default;
},{"./index":"Z6u4","./finally":"QNKW"}],"s49y":[function(require,module,exports) {
"use strict";function e(e,t){return new Function("c","with (c) { return "+e+" }")(t)}function t(e,t){var r=new Function("c","with (c) { return "+e+" }")(t);return Promise.resolve(r)}function r(e,t){new Function("c","with (c) { "+e+" }")(t)}function n(e,t){if(!1!==t(e))for(var r=e.firstElementChild;r;)n(r,t),r=r.nextElementSibling}function o(e,t){return void 0!==e.dataset?e.dataset[i(t)]:e.getAttribute("data-"+t)}function a(e,t,r){void 0!==e.dataset?e.dataset[i(t)]=r:e.setAttribute("data-"+t,r)}function i(e){return e.replace(/\-(.)/g,function(e){return e.toUpperCase()}).replace(/\-/g,"").replace(/^(.)/,function(e){return e.toLowerCase()})}function u(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function c(e){var t={};return e.forEach(function(e,r){t[r]=e}),t}function s(e){var t=[],r=encodeURIComponent;for(var n in e)t.concat(r(n)+"="+r(e[n]));return t.join("&")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.evaluateAndReturn=e,exports.evaluateAndPromise=t,exports.evaluate=r,exports.crawl=n,exports.getDataAttribute=o,exports.setDataAttribute=a,exports.toCamelCase=i,exports.toKebabCase=u,exports.serializeForm=c,exports.encodeUriParameters=s,require("promise-polyfill/src/polyfill");
},{"promise-polyfill/src/polyfill":"qBxc"}],"knre":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,n=arguments[3];!function(n,r){"function"==typeof t&&t.amd?t(r(n)):"object"==typeof module&&module.exports?module.exports=r(n):n.Proxy||(n.Proxy=r(n))}("object"==typeof globalThis&&globalThis||"object"==typeof window&&window||"object"==typeof n&&n||"object"==typeof self&&self||this,function(t){var n,r="[[ProxyTarget]]",o="[[ProxyHandler]]",e="[[Get]]",i="[[Set]]",c="[[Call]]",u="[[Construct]]",a=t.Object,f=a.defineProperty,s=a.defineProperties,p=a.getPrototypeOf,y=a.getOwnPropertyDescriptor,h=!!s&&/\[native code\]/.test(s.toString());function l(t,n){if(this instanceof l)return v(t,n).proxy;d("Constructor Proxy requires 'new'")}function v(t,a){w(t)&&w(a)||d("Cannot create proxy with a non-object as target or handler");var l=new g(t,a);return{proxy:("function"==typeof t?function(t){var n=t[r];function o(){return this instanceof o?t[u](arguments,o):t[c](this,arguments)}if(o.prototype=n.prototype,h){var e=C(t),i=T(p(n),e);for(var a in j(o,i),e=O(n,t))P(o,a)&&delete e[a];s(o,e)}else m(o,n);return o}:t instanceof Array?function(t){var o,c,u=t[r];return h&&((o=C(t)).concat.get=function(){var n=t[e]("concat",this);return n===Array.prototype.concat?n.bind(u):n},c=T(p(u),o)),(o=O(u,t)).length.set=function(o){var e=o-u.length;t[i]("length",o,this),e&&function(t,o,e){var i=e[r];if(0<t)for(var c=i.length,u=c-t;u<c;++u){var a=y(o,u);a?f(i,u,a):i[u]=n,a=_(i,u,e),f(o,u,a)}else for(var s=(u=i.length)-t;u<s;++u)delete o[u]}(e,this,t)},T(c,o)}:function(t){var n,o,e=t[r];return h&&(n=C(t),o=T(p(e),n)),n=O(e,t),T(o,n)})(l),revoke:function(){l[r]=n,l[o]=n}}}function g(t,n){this[r]=t,this[o]=n}function b(t,n){t||d("Cannot perform '"+n+"' on a proxy that has been revoked")}function d(t){throw new TypeError(t)}function w(t){return t&&("object"==typeof t||"function"==typeof t)}function P(t,n){return a.prototype.hasOwnProperty.call(t,n)}l.revocable=function(t,n){return this instanceof l.revocable&&d("Proxy.revocable is not a constructor"),v(t,n)},g.prototype[e]=function(t,e){var i=this[o];return b(i,"get"),i.get==n?this[r][t]:"function"==typeof i.get?i.get(this[r],t,e):void d("Trap 'get' is not a function: "+i.get)},g.prototype[i]=function(t,e,i){var c=this[o];b(c,"set"),c.set==n?this[r][t]=e:"function"==typeof c.set?c.set(this[r],t,e,i)||d("Trap 'set' returned false for property '"+t+"'"):d("Trap 'set' is not a function: "+c.set)},g.prototype[c]=function(t,e){var i=this[o];return b(i,"apply"),i.apply==n?this[r].apply(t,e):"function"==typeof i.apply?i.apply(this[r],t,e):void d("Trap 'apply' is not a function: "+i.apply)},g.prototype[u]=function(t,e){var i,c=this[o];if(b(c,"construct"),c.construct==n?i=function(t,n){for(var r=[],o=0,e=n.length;o<e;++o)r.push("args["+o+"]");return new Function("Ctor","args","return new Ctor("+r.join(", ")+")")(t,n)}(this[r],t):"function"==typeof c.construct?i=c.construct(this[r],t,e):d("Trap 'construct' is not a function: "+c.construct),w(i))return i;d("Trap 'construct' returned non-object: "+i)};var x=a.getOwnPropertyNames||function(t){var n=[];for(var r in t)P(t,r)&&n.push(r);return n},j=a.setPrototypeOf||function(t,n){return t.__proto__=n,t},T=h?a.create:function(t,n){return s({},n)},m=a.assign||function(t,n){for(var r in n)P(n,r)&&(t[r]=n[r]);return t};function C(t){for(var n={},o=t[r];o=p(o);){var e=O(o,t);m(n,e)}return n}function O(t,n){for(var r=x(t),o={},e=r.length-1;0<=e;--e)o[r[e]]=_(t,r[e],n);return o}function _(t,n,r){var o=y(t,n);return{get:function(){return r[e](n,this)},set:function(t){r[i](n,t,this)},enumerable:o.enumerable,configurable:o.configurable}}return l});
},{}],"hzwm":[function(require,module,exports) {
!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(n){var t=function(e,t){var r,a;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(r=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a=r.preventDefault,r.preventDefault=function(){a.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(n){this.defaultPrevented=!0}},r};t.prototype=window.Event.prototype,window.CustomEvent=t}}();
},{}],"MScu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Headers=a,exports.Request=m,exports.Response=A,exports.fetch=x,exports.DOMException=void 0;var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function e(t){return t&&DataView.prototype.isPrototypeOf(t)}if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&r.indexOf(Object.prototype.toString.call(t))>-1};function n(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!=typeof t&&(t=String(t)),t}function i(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function a(t){this.map={},t instanceof a?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function h(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader,r=u(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=u(e);return e.readAsText(t),r}function l(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function c(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?"string"==typeof r?this._bodyText=r:t.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:t.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():t.arrayBuffer&&t.blob&&e(r)?(this._bodyArrayBuffer=c(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||o(r))?this._bodyArrayBuffer=c(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||("string"==typeof r?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=h(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(t,e){t=n(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},a.prototype.delete=function(t){delete this.map[n(t)]},a.prototype.get=function(t){return t=n(t),this.has(t)?this.map[t]:null},a.prototype.has=function(t){return this.map.hasOwnProperty(n(t))},a.prototype.set=function(t,e){this.map[n(t)]=s(e)},a.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},a.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),i(t)},a.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),i(t)},a.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),i(t)},t.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t){var e=t.toUpperCase();return p.indexOf(e)>-1?e:t}function m(t,e){var r=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new a(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new a(e.headers)),this.method=b(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function v(t){var e=new a;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function A(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new a(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},y.call(m.prototype),y.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];A.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})};var E=self.DOMException;exports.DOMException=E;try{new E}catch(g){exports.DOMException=E=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},E.prototype=Object.create(Error.prototype),E.prototype.constructor=E}function x(e,r){return new Promise(function(o,n){var s=new m(e,r);if(s.signal&&s.signal.aborted)return n(new E("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:v(i.getAllResponseHeaders()||"")};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;o(new A(e,t))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.onabort=function(){n(new E("Aborted","AbortError"))},i.open(s.method,s.url,!0),"include"===s.credentials?i.withCredentials=!0:"omit"===s.credentials&&(i.withCredentials=!1),"responseType"in i&&t.blob&&(i.responseType="blob"),s.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&s.signal.removeEventListener("abort",a)}),i.send(void 0===s._bodyInit?null:s._bodyInit)})}x.polyfill=!0,self.fetch||(self.fetch=x,self.Headers=a,self.Request=m,self.Response=A);
},{}],"ONc1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("es6-proxy-polyfill/dist/es6-proxy-polyfill"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}var i=function(){function e(o,r){n(this,e);this.actions=r.hasOwnProperty("actions")?r.actions:{},this.state=new t.default(r.state||{},{set:function(t,e,n){return t[e]=n,o.dispatch(document,"state-change",{state:e,value:n}),!0}})}return r(e,[{key:"dispatch",value:function(t,e){if("function"!=typeof this.actions[t])throw new Error("Action "+t+" doesn't exist.");this.actions[t](this.state,e)}}]),e}();exports.default=i;
},{"es6-proxy-polyfill/dist/es6-proxy-polyfill":"knre"}],"frUr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TriggerInfo=exports.Engine=void 0;var t=require("./helpers"),e=r(require("es6-proxy-polyfill/dist/es6-proxy-polyfill"));require("custom-event-polyfill"),require("whatwg-fetch");var i=r(require("./store"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var u=/^data-on:([a-zA-Z0-9\-]+)(\.[a-zA-Z\.\-]*)?$/,s=function(){function r(t){n(this,r),this.root=t,this.mutations={},this.triggers={},this.tags={},this.store=null}return o(r,[{key:"start",value:function(){this.mount(this.root)}},{key:"createStore",value:function(t){return this.store=new i.default(this,t),this}},{key:"registerTrigger",value:function(t){this.triggers[t.name]=t}},{key:"registerMutation",value:function(e){this.mutations[(0,t.toCamelCase)(e.name)]=e.apply}},{key:"getEmptyContext",value:function(){var t=this;return{$dom:new e.default(t.tags,{get:function(e,i){if(i in e)return t.createMutableElement(document.getElementById(i))}}),$el:null,$data:null,q:function(e){var i=t.root.querySelector(e);return i?t.createMutableElement(i):void 0},fetchText:function(t){return fetch(t).then(function(t){return t.text()})},fetchJson:function(t){return fetch(t).then(function(t){return t.json()})},$state:t.store?t.store.state:void 0,$dispatch:function(e,i){t.store?t.store.dispatch(e,i):console.error("no store founded. call Engine.createStore before use $dispatch function")}}}},{key:"createMutableElement",value:function(t){var i=this.mutations,r=this,n={$el:t};for(var a in this.mutations)this.mutations.hasOwnProperty(a)&&(n[a]="");return new e.default(n,{set:function(t,e,n){return void 0!==i[e]&&(i[e](n,t.$el,r),!0)},get:function(t,e){return"$el"===e?t[e]:"value"===e?t.$el.value:void 0}})}},{key:"run",value:function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getEmptyContext();o.$data=r,o.$el=i;var u=(e||"").split("->");if(1===u.length)if(e=u[0],a)(0,t.evaluate)(e+" = $data",o);else if(n){var s=(0,t.evaluateAndReturn)(e,o);n(s)}else(0,t.evaluate)(e,o);else{var l=this;(e=u.shift()).replace(/\s/g,"").length||(e="$data"),(0,t.evaluateAndPromise)(e,o).then(function(t){l.run(u.join("->"),i,t,n,!0)})}}},{key:"dispatch",value:function(t,e,i){t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0}))}},{key:"mount",value:function(e){var i=this;(0,t.crawl)(e,function(e){if(e.id&&!e._uijx_initiated){i.tags[(0,t.toCamelCase)(e.id)]="";for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r];u.test(n.name)&&function(){var r=new l(e,n.name),a=i.triggers[r.trigger]||i.triggers.event;if(a){var o=null;if(o="document"===a.attachTo?document:"root"===a.attachTo?i.root:"self"===a.attachTo?e:new RegExp("^"+a.attachTo+"$").test(e.nodeName.toUpperCase())?e:null){var u=(0,t.toKebabCase)(a.event||r.trigger);o.addEventListener(u,function(t){a.waiting&&i.dispatch(e,"waiting",{waiting:!0,slot:e}),a.handle(i.createMutableElement(e),t,r,i,function(){a.waiting&&i.dispatch(e,"waiting",{waiting:!1,slot:e})})})}}}()}e._uijx_initiated=!0}})}}]),r}();exports.Engine=s;var l=function(){function e(i,r){n(this,e);var a=u.exec(r);if(!a)throw new Error('"'+r+'" is not a valid trigger attribute');this.trigger=a[1],this.modifiers=a[2]||"",this.after=(0,t.getDataAttribute)(i,this.trigger+"-after"),this.before=(0,t.getDataAttribute)(i,this.trigger+"-before"),this.error=(0,t.getDataAttribute)(i,this.trigger+"-error"),this.task=i.getAttribute(r)}return o(e,[{key:"getModifierList",value:function(){return this.rawModifiers.split(".")}},{key:"hasModifier",value:function(t){return this.modifiers.indexOf("."+t)>=0}},{key:"containModifiers",value:function(){return 0!==this.modifiers.trim().length}}]),e}();exports.TriggerInfo=l;
},{"./helpers":"s49y","es6-proxy-polyfill/dist/es6-proxy-polyfill":"knre","custom-event-polyfill":"hzwm","whatwg-fetch":"MScu","./store":"ONc1"}],"bI0J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={name:"event",attachTo:"self",event:null,waiting:!0,handle:function(e,t,n,r,u){var a=void 0;["blur","change","focus","keydown","keyup"].indexOf(t.type)>=0&&(a=e.$el.value),r.run(n.before,e,a,function(o){o=o||a,n.hasModifier("prevent")&&t.preventDefault(),r.run(n.task,e,o,function(t){return r.run(n.after,e,t,u)})})}};exports.default=e;
},{}],"NCUL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("whatwg-fetch"),require("promise-polyfill/src/polyfill");var e={name:"link",attachTo:"A",event:"click",waiting:!0,handle:function(e,r,t,n,o){r.preventDefault();n.run(t.before,e,void 0,function(r){var u=e.$el.getAttribute("href");fetch(u).then(function(e){return(t.hasModifier("json")?e.json():t.hasModifier("blob")?e.blob():t.hasModifier("buffer")?e.arrayBuffer():e.text()).then(function(r){return{status:e.status,content:r}})}).then(function(r){var u=r.status,f=r.content;if(u>=400){if(!t.error)throw new Error("error after fetching ressource. use the error hook to query the request result");n.run(t.error,e,f,function(r){return n.run(t.after,e,r,o)})}else n.run(t.task,e,f,function(r){return n.run(t.after,e,r,o)})}).catch(function(e){console.error(e)})})}};exports.default=e;
},{"whatwg-fetch":"MScu","promise-polyfill/src/polyfill":"qBxc"}],"qk0L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("whatwg-fetch"),require("promise-polyfill/src/polyfill");var e=require("../helpers"),r={name:"form",attachTo:"FORM",event:"submit",waiting:!0,handle:function(r,t,o,n,i){t.preventDefault();n.run(o.before,r,void 0,function(t){var u=r.$el.getAttribute("action"),a=r.$el.getAttribute("method")||"GET";a=a.toUpperCase();var s,f=new FormData(r.$el);"GET"===a?(u+="?"+(0,e.encodeUriParameters)((0,e.serializeForm)(f)),s=fetch(u)):s=fetch(u,{method:a,body:o.hasModifier("serialize")?JSON.stringify((0,e.serializeForm)(f)):f}),s.then(function(e){return(o.hasModifier("json")?e.json():o.hasModifier("blob")?e.blob():o.hasModifier("buffer")?e.arrayBuffer():e.text()).then(function(r){return{status:e.status,content:r}})}).then(function(e){var t=e.status,u=e.content;if(t>=400){if(!o.error)throw new Error("error after fetching ressource. use the error hook to query the request result");n.run(o.error,r,u,function(e){return n.run(o.after,r,e,i)})}else n.run(o.task,r,u,function(e){return n.run(o.after,r,e,i)})}).catch(function(e){console.error(e)})})}};exports.default=r;
},{"whatwg-fetch":"MScu","promise-polyfill/src/polyfill":"qBxc","../helpers":"s49y"}],"y3kr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={name:"waiting",attachTo:"document",event:"waiting",waiting:!1,handle:function(t,e,i,n,a){var r=e.detail.waiting;!i.hasModifier(e.detail.slot.id)&&i.containModifiers()||n.run(i.before,t,r,function(e){e=e||r,n.run(i.task,t,e,function(e){return n.run(i.after,t,e,a)})})}};exports.default=t;
},{}],"eJQY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={name:"mutation",attachTo:"document",event:"dom-mutated",waiting:!1,handle:function(t,e,n,o,i){!n.hasModifier(e.detail.target.id)&&n.containModifiers()||o.run(n.before,t,void 0,function(e){e=e||void 0,o.run(n.task,t,e,function(e){return o.run(n.after,t,e,i)})})}};exports.default=t;
},{}],"QZfg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={name:"state-change",attachTo:"document",event:"state-change",waiting:!1,handle:function(e,t,a,n,r){var i=t.detail.value;!a.hasModifier(t.detail.state)&&a.containModifiers()||n.run(a.before,e,i,function(t){t=t||i,n.run(a.task,e,t,function(t){return n.run(a.after,e,t,r)})})}};exports.default=e;
},{}],"W5x2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PREPEND=exports.APPEND=exports.AFTER=exports.BEFORE=exports.HTML=exports.TEXT=exports.VALUE=exports.ATTRIB=exports.CLASSES=exports.STYLE=exports.VISIBLE=exports.TOGGLECLASS=exports.RMCLASS=exports.ADDCLASS=exports.TOGGLE=exports.SHOW=void 0;var t=require("./helpers"),e={name:"show",apply:function(t,e,a){e.style.display=t?"block":"none",a.dispatch(e,"dom-mutated",{mutation:"show",target:e})}};exports.SHOW=e;var a={name:"toggle",apply:function(t,e,a){"none"===e.style.display?e.style.display="block":e.style.display="none",a.dispatch(e,"dom-mutated",{mutation:"toggle",target:e})}};exports.TOGGLE=a;var o={name:"add-class",apply:function(t,e,a){for(var o in"string"==typeof t&&(t=t.split(" ")),t)e.classList.add(t[o]);a.dispatch(e,"dom-mutated",{mutation:"add-class",target:e})}};exports.ADDCLASS=o;var s={name:"rm-class",apply:function(t,e,a){for(var o in"string"==typeof t&&(t=t.split(" ")),t)e.classList.remove(t[o]);a.dispatch(e,"dom-mutated",{mutation:"rm-class",target:e})}};exports.RMCLASS=s;var r={name:"toggle-class",apply:function(t,e,a){for(var o in"string"==typeof t&&(t=t.split(" ")),t)e.classList.toggle(t[o]);a.dispatch(e,"dom-mutated",{mutation:"toggle-class",target:e})}};exports.TOGGLECLASS=r;var n={name:"visible",apply:function(t,e,a){e.style.visibility=t?"visible":"hidden",a.dispatch(e,"dom-mutated",{mutation:"visible",target:e})}};exports.VISIBLE=n;var p={name:"style",apply:function(e,a,o){for(var s in e)a.style[(0,t.toKebabCase)(s)]=e[s];o.dispatch(a,"dom-mutated",{mutation:"style",target:a})}};exports.STYLE=p;var i={name:"classes",apply:function(t,e,a){for(var o in t)t[o]?e.classList.add(o):e.classList.remove(o);a.dispatch(e,"dom-mutated",{mutation:"classes",target:e})}};exports.CLASSES=i;var d={name:"attrib",apply:function(e,a,o){for(var s in e)a.setAttribute((0,t.toKebabCase)(s),e[s]);o.dispatch(a,"dom-mutated",{mutation:"attrib",target:a})}};exports.ATTRIB=d;var m={name:"value",apply:function(t,e,a){e.value=t,a.dispatch(e,"dom-mutated",{mutation:"value",target:e})}};exports.VALUE=m;var l={name:"text",apply:function(t,e,a){e.innerText=t,a.dispatch(e,"dom-mutated",{mutation:"text",target:e})}};exports.TEXT=l;var u={name:"html",apply:function(t,e,a){e.innerHTML=t,a.mount(e),a.dispatch(e,"dom-mutated",{mutation:"html",target:e})}};exports.HTML=u;var c={name:"before",apply:function(t,e,a){e.insertAdjacentHTML("beforebegin",t),a.mount(e),a.dispatch(e,"dom-mutated",{mutation:"before",target:e})}};exports.BEFORE=c;var x={name:"after",apply:function(t,e,a){e.insertAdjacentHTML("afterend",t),a.mount(e),a.dispatch(e,"dom-mutated",{mutation:"after",target:e})}};exports.AFTER=x;var f={name:"append",apply:function(t,e,a){e.insertAdjacentHTML("beforeend",t),a.mount(e),a.dispatch(e,"dom-mutated",{mutation:"append",target:e})}};exports.APPEND=f;var v={name:"prepend",apply:function(t,e,a){e.insertAdjacentHTML("afterbegin",t),a.mount(e),a.dispatch(e,"dom-mutated",{mutation:"prepend",target:e})}};exports.PREPEND=v;
},{"./helpers":"s49y"}],"o6i0":[function(require,module,exports) {
"use strict";var r=require("./src/core"),e=a(require("./src/triggers/event")),t=a(require("./src/triggers/link")),i=a(require("./src/triggers/form")),g=a(require("./src/triggers/waiting")),s=a(require("./src/triggers/mutation")),u=a(require("./src/triggers/stateChanged")),n=require("./src/mutations");function a(r){return r&&r.__esModule?r:{default:r}}function o(a){var o=document.getElementById(a);if(o){var M=new r.Engine(o);return M.registerTrigger(e.default),M.registerTrigger(t.default),M.registerTrigger(i.default),M.registerTrigger(g.default),M.registerTrigger(s.default),M.registerTrigger(u.default),M.registerMutation(n.SHOW),M.registerMutation(n.TOGGLE),M.registerMutation(n.ADDCLASS),M.registerMutation(n.RMCLASS),M.registerMutation(n.TOGGLECLASS),M.registerMutation(n.STYLE),M.registerMutation(n.VISIBLE),M.registerMutation(n.CLASSES),M.registerMutation(n.ATTRIB),M.registerMutation(n.VALUE),M.registerMutation(n.TEXT),M.registerMutation(n.HTML),M.registerMutation(n.AFTER),M.registerMutation(n.BEFORE),M.registerMutation(n.APPEND),M.registerMutation(n.PREPEND),M}throw new Error("cannot find element with id: "+a)}window.Uijx=o;
},{"./src/core":"frUr","./src/triggers/event":"bI0J","./src/triggers/link":"NCUL","./src/triggers/form":"qk0L","./src/triggers/waiting":"y3kr","./src/triggers/mutation":"eJQY","./src/triggers/stateChanged":"QZfg","./src/mutations":"W5x2"}]},{},["o6i0"], null)
//# sourceMappingURL=/uijx.js.map